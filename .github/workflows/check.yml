name: Check Joe Sessions

on:
  schedule:
    - cron: "0 9,20 * * *" 	#9am, 8pm UTC
      workflow_dispatch:    # allow manual trigger	
jobs:
  check:
    runs-on: ubuntu-latest	
    steps:
    - name: Checkout repo
      uses: actions/checkout@v3
      
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
          python-version: "3.11"
                
    - name: Install dependencies
      run: |
            pip install playwright
            playwright install --with-deps chromium
            
    - name: Run script
      env:
            EMAIL_USER: ${{ secrets.EMAIL_USER }}
            EMAIL_PASS: ${{ secrets.EMAIL_PASS }}
            EMAIL_TO:	${{ secrets.EMAIL_TO }}
      run: python JoeSessionChecker.py